<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SEA 수리&재가공 현황</title>
  <style>
    /* 기본 리셋/타이포 */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

    body { background:#f5f7fa; padding:20px; }

    /* 컨테이너: 1400 → 2000px (요청) */
    .container {
      max-width: 2000px;
      width: 100%;
      margin: 0 auto;
    }

    .header {
      text-align:center; margin-bottom:30px; padding:20px;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      border-radius:15px; box-shadow:0 8px 32px rgba(0,0,0,.1); color:#fff;
    }
    .header h1 { font-size:2.5rem; font-weight:700; text-shadow:2px 2px 4px rgba(0,0,0,.3); }

    .controls { display:flex; gap:15px; margin-bottom:20px; flex-wrap:wrap; }
    .btn {
      padding:12px 24px; border:none; border-radius:8px; cursor:pointer; font-weight:600;
      transition:all .3s ease; box-shadow:0 4px 15px rgba(0,0,0,.1);
    }
    .btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.15); }
    .btn-add { background:linear-gradient(135deg,#4CAF50 0%,#45a049 100%); color:#fff; }
    .btn-delete { background:linear-gradient(135deg,#f44336 0%,#da190b 100%); color:#fff; }
    .btn-register { background:linear-gradient(135deg,#2196F3 0%,#1976D2 100%); color:#fff; }

    .table-container {
      background:#fff; border-radius:15px; box-shadow:0 8px 32px rgba(0,0,0,.1);
      overflow:hidden;  /* 스크롤 억제: 내부에서 강제폭을 제거했기 때문에 스크롤 없이 맞춰짐 */
    }

    /* === 테이블: 자동 배치 사용, 고정폭 제거 === */
    table { width:100%; border-collapse:collapse; table-layout:auto; }
    th, td { padding:12px 8px; text-align:center; border:1px solid #e0e0e0; white-space:nowrap; }

    /* 스티키 헤더 */
    thead th {
      position: sticky; top: 0; z-index: 10;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; font-weight:600; font-size:.85rem;
    }

    tr:nth-child(even){ background:#f8f9fa; }
    tr:hover{ background:#e3f2fd; }

    input[type="date"]{
      width:100%; padding:6px; border:1px solid #ddd; border-radius:4px; text-align:center; font-size:.85rem;
    }
    select{
      width:100%; padding:6px; border:1px solid #ddd; border-radius:4px; text-align:center; font-size:.85rem; font-weight:500;
    }
    [contenteditable]{
      padding:6px; border:1px solid transparent; border-radius:4px; text-align:center; outline:none; transition:border-color .3s ease;
      font-size:.85rem; word-break:break-all; min-height:20px;
    }
    [contenteditable]:hover{ border-color:#ddd; }
    [contenteditable]:focus{ border-color:#2196F3; background:#fff3e0; }

    .filter-input{
      width:100%; padding:5px; border:1px solid #ddd; border-radius:4px; text-align:center; margin-bottom:3px; font-size:.75rem;
    }
    .checkbox-cell { width:30px; }
    .checkbox-cell input { width:18px; height:18px; cursor:pointer; }

    /* 상태 뱃지 (옵션) */
    .status-접수완료{ background:#e0e0e0; color:#616161; }
    .status-수리중{ background:#bbdefb; color:#1976d2; }
    .status-무상수리완료{ background:#c8e6c9; color:#388e3c; }
    .status-유상수리완료{ background:#ffe0b2; color:#ef6c00; }

    /* === 컬럼별 ‘최소’ 너비만 살짝 (자동배치 유지) ===
       헤더 순서: 1접수일자 2발송일자 3거래처 4품번 5품명 6규격 7증상 8진단 결과
                 9상태 10수리 담당자 11연락처 12수리완료일 13수리비용 14비고
    */
    #mainTable th:nth-child(3),  #mainTable td:nth-child(3)  { min-width:140px; } /* 거래처 */
    #mainTable th:nth-child(4),  #mainTable td:nth-child(4)  { min-width:140px; } /* 품번 */
    #mainTable th:nth-child(5),  #mainTable td:nth-child(5)  { min-width:180px; } /* 품명 */
    #mainTable th:nth-child(6),  #mainTable td:nth-child(6)  { min-width:140px; } /* 규격 */
    #mainTable th:nth-child(10), #mainTable td:nth-child(10) { min-width:150px; } /* 수리 담당자 */
    #mainTable th:nth-child(11), #mainTable td:nth-child(11) { min-width:150px; } /* 연락처 */
    #mainTable th:nth-child(13), #mainTable td:nth-child(13) { min-width:130px; } /* 수리비용 */
    #mainTable th:nth-child(14), #mainTable td:nth-child(14) { min-width:180px; } /* 비고 */

    /* === 모달 === */
    .modal { display:none; position:fixed; z-index:1000; inset:0; background:rgba(0,0,0,.5); }
    .modal-content{
      background:#fff; margin:5% auto; padding:20px; border-radius:12px;
      width:420px; max-width:calc(100vw - 40px); overflow:hidden;
      box-shadow:0 20px 60px rgba(0,0,0,.3); animation:modalSlideIn .3s ease-out;
    }
    @keyframes modalSlideIn { from{ transform:translateY(-50px); opacity:0; } to{ transform:translateY(0); opacity:1; } }
    .modal-header{ text-align:center; margin-bottom:15px; color:#333; font-size:1.1rem; font-weight:600; }
    .modal-table{ width:100%; border-collapse:collapse; table-layout:fixed; margin-bottom:12px; }
    .modal-table th,.modal-table td{ padding:8px 6px; border:1px solid #ddd; text-align:center; font-size:.85rem; }
    .modal-table th{ background:#f5f5f5; font-weight:600; width:110px; white-space:nowrap; }
    .modal-table td{ min-width:0; }
    .modal-input{
      display:block; width:100%; max-width:100%; padding:6px; border:1px solid #ddd; border-radius:4px; text-align:center; font-size:.9rem;
    }
    .modal-input:focus{ outline:2px solid #2196F3; }
    .modal-footer{ text-align:center; margin-top:12px; }
    .modal-btn{ padding:10px 18px; border:none; border-radius:6px; cursor:pointer; font-weight:600; margin:0 8px; transition:all .3s ease; font-size:.9rem; }
    .modal-btn-confirm{ background:linear-gradient(135deg,#4CAF50 0%,#45a049 100%); color:#fff; }
    .modal-btn-cancel{ background:linear-gradient(135deg,#f44336 0%,#da190b 100%); color:#fff; }
    .modal-btn:hover{ transform:translateY(-1px); box-shadow:0 3px 10px rgba(0,0,0,.2); }

    @media (max-width: 768px){
      .header h1{ font-size:2rem; }
      .controls{ flex-direction:column; }
      .btn{ width:100%; padding:10px 20px; font-size:.9rem; }
      .modal-content{ padding:15px; width:calc(100vw - 40px); max-width:calc(100vw - 40px); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header"><h1>SEA 수리&재가공 현황</h1></div>

    <div class="controls">
      <button class="btn btn-add" onclick="addRow()">[행 추가]</button>
      <button class="btn btn-delete" onclick="deleteSelectedRows()">[행 삭제]</button>
      <button class="btn btn-register" onclick="openRegisterModal()">[접수]</button>
    </div>

    <div class="table-container">
      <table id="mainTable">
        <thead>
          <tr>
            <th><input type="checkbox" onclick="toggleAllCheckboxes(this)"/></th>
            <th>접수일자<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(1,this.value)"/></th>
            <th>발송일자<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(2,this.value)"/></th>
            <th>거래처<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(3,this.value)"/></th>
            <th>품번<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(4,this.value)"/></th>
            <th>품명<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(5,this.value)"/></th>
            <th>규격<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(6,this.value)"/></th>
            <th>증상<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(7,this.value)"/></th>
            <th>진단 결과<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(8,this.value)"/></th>
            <th>상태<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(9,this.value)"/></th>
            <th>수리 담당자<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(10,this.value)"/></th>
            <th>연락처<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(11,this.value)"/></th>
            <th>수리완료일<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(12,this.value)"/></th>
            <th>수리비용<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(13,this.value)"/></th>
            <th>비고<br><input type="text" class="filter-input" placeholder="필터" onkeyup="filterTable(14,this.value)"/></th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <tr>
            <td class="checkbox-cell"><input type="checkbox"/></td>
            <td><input type="date"/></td>
            <td><input type="date"/></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td>
              <select onchange="updateStatus(this)">
                <option value="">선택</option>
                <option value="접수완료">접수완료</option>
                <option value="수리중">수리 중</option>
                <option value="무상수리완료">무상수리완료</option>
                <option value="유상수리완료">유상수리완료</option>
              </select>
            </td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
            <td><input type="date"/></td>
            <td contenteditable="true"></td>
            <td contenteditable="true"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- 접수 모달 -->
  <div id="registerModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-header">신규 접수 등록</h2>
      <table class="modal-table">
        <tr><th>접수일자</th><td><input type="date" class="modal-input" id="modalReceiptDate"/></td></tr>
        <tr><th>거래처</th><td><input type="text" class="modal-input" id="modalCompany" maxlength="20"/></td></tr>
        <tr><th>품번</th><td><input type="text" class="modal-input" id="modalPartNo" maxlength="20"/></td></tr>
        <tr><th>품명</th><td><input type="text" class="modal-input" id="modalPartName" maxlength="20"/></td></tr>
        <tr><th>규격</th><td><input type="text" class="modal-input" id="modalSpec" maxlength="20"/></td></tr>
        <tr><th>증상</th><td><input type="text" class="modal-input" id="modalSymptom" maxlength="20"/></td></tr>
        <tr><th>수리담당자</th><td><input type="text" class="modal-input" id="modalRepairer" maxlength="20"/></td></tr>
        <tr><th>연락처</th><td><input type="text" class="modal-input" id="modalContact" maxlength="20"/></td></tr>
        <tr><th>비고</th><td><input type="text" class="modal-input" id="modalNote" maxlength="20"/></td></tr>
      </table>
      <div class="modal-footer">
        <button class="modal-btn modal-btn-confirm" onclick="confirmRegister()">[확인]</button>
        <button class="modal-btn modal-btn-cancel" onclick="closeRegisterModal()">[취소]</button>
      </div>
    </div>
  </div>

  <script>
    function addRow(){
      const tbody=document.getElementById('tableBody');
      const tr=tbody.insertRow();
      tr.innerHTML=`
        <td class="checkbox-cell"><input type="checkbox"></td>
        <td><input type="date"></td>
        <td><input type="date"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td>
          <select onchange="updateStatus(this)">
            <option value="">선택</option>
            <option value="접수완료">접수완료</option>
            <option value="수리중">수리 중</option>
            <option value="무상수리완료">무상수리완료</option>
            <option value="유상수리완료">유상수리완료</option>
          </select>
        </td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>
        <td><input type="date"></td>
        <td contenteditable="true"></td>
        <td contenteditable="true"></td>`;
    }

    function deleteSelectedRows(){
      const tbody=document.getElementById('tableBody');
      const selected=tbody.querySelectorAll('input[type="checkbox"]:checked');
      for(let i=selected.length-1;i>=0;i--){ selected[i].closest('tr').remove(); }
    }

    function toggleAllCheckboxes(master){
      const tbody=document.getElementById('tableBody');
      tbody.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=master.checked);
    }

    function updateStatus(sel){
      const row=sel.closest('tr');
      const cell=row.cells[9];
      const v=sel.value;
      cell.className='';
      if(v){ cell.classList.add(`status-${v.replace(/\s+/g,'')}`); }
    }

    function filterTable(col, val){
      const rows=document.getElementById('mainTable').tBodies[0].rows;
      const q=(val||'').toLowerCase();
      for(const r of rows){
        const text=(r.cells[col] && (r.cells[col].textContent||'')).toLowerCase();
        r.style.display= text.includes(q) ? '' : 'none';
      }
    }

    function openRegisterModal(){
      document.getElementById('registerModal').style.display='block';
      document.body.style.overflow='hidden';
      document.querySelectorAll('#registerModal input').forEach(i=>i.value='');
    }
    function closeRegisterModal(){
      document.getElementById('registerModal').style.display='none';
      document.body.style.overflow='';
    }

    function confirmRegister(){
      const g=id=>document.getElementById(id).value;
      const receiptDate=g('modalReceiptDate'), company=g('modalCompany'), partNo=g('modalPartNo'),
            partName=g('modalPartName'), spec=g('modalSpec'), symptom=g('modalSymptom'),
            repairer=g('modalRepairer'), contact=g('modalContact'), note=g('modalNote');

      const tbody=document.getElementById('tableBody');
      const tr=tbody.insertRow();
      tr.innerHTML=`
        <td class="checkbox-cell"><input type="checkbox"></td>
        <td>${receiptDate?`<input type="date" value="${receiptDate}">`:'<input type="date">'}</td>
        <td><input type="date"></td>
        <td contenteditable="true">${company}</td>
        <td contenteditable="true">${partNo}</td>
        <td contenteditable="true">${partName}</td>
        <td contenteditable="true">${spec}</td>
        <td contenteditable="true">${symptom}</td>
        <td></td>
        <td class="status-접수완료">
          <select onchange="updateStatus(this)">
            <option value="">선택</option>
            <option value="접수완료" selected>접수완료</option>
            <option value="수리중">수리 중</option>
            <option value="무상수리완료">무상수리완료</option>
            <option value="유상수리완료">유상수리완료</option>
          </select>
        </td>
        <td>${repairer}</td>
        <td>${contact}</td>
        <td><input type="date"></td>
        <td></td>
        <td contenteditable="true">${note}</td>`;
      closeRegisterModal();
    }

    window.addEventListener('click',e=>{
      const m=document.getElementById('registerModal');
      if(e.target===m) closeRegisterModal();
    });
    document.addEventListener('keydown',e=>{
      if(e.key==='Escape') closeRegisterModal();
    });
  </script>
</body>
</html>
